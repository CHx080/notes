*Linux可以通过lsblk\fdisk命令查看辅存信息*

# 机械硬盘(HDD)

![机械硬盘 的图像结果](https://tse4-mm.cn.bing.net/th/id/OIP-C.Ckoe4bbIDnibUYyVRHBMHQHaE8?w=264&h=180&c=7&pcl=1b1a19&r=0&o=5&dpr=1.3&pid=1.7)

机械硬盘是最常见的辅助存储器，其特点是容量大，非易失，价格低。但是作为机械设备其读写速度远不及半导体制成的CPU和主存的读写速度。

一摞**盘面**构成一块机械磁盘。每一个盘面上有众多**磁道**，每个磁道又被等分成**扇区**。扇区是机械硬盘读写的基本单位。左视图中相同半径的磁道在竖直方向构成一个**柱面**。大部分情况下扇区都是等大小的**512Bytes**，表现为内侧磁道的数据密度高于外侧磁道。

![img](https://i-blog.csdnimg.cn/direct/66a487aa5b05453baed5c8b896524236.png)

## 磁盘性能参数

每一个盘面都有一个与之对应的读写**磁头**用于读写该盘面上的磁道数据。在读写数据之前需要将磁头定位到开始位置(**磁头定位到指定磁道**),称为**寻道**①。等待磁头定位到指定扇区②，盘片转动磁头不动开始读取数据③。

整个读写过程分为3部分，3部分所花费的时间称为**寻道时间、旋转延迟、存取时间**。寻道时间是三个过程中最费时间的(*磁头移动比盘片转动慢得多*)。减少寻道时间可以提高硬盘读写效率，这一点体现在连续IO的速度快于随机IO(*连续IO只需要依次寻道，而随机IO需要在磁道间反复横跳*)

*扇区之间、磁道之间不是紧挨着的，保留了一小部分用于差错控制*

## 磁盘阵列

> 辅存性能的改进速度比处理器和主存的性能改进速度慢得多。这种不匹配使得磁盘存储系统成为改进整个计算机系统性能的焦点。
>
> 如果一种元件已经推进到瓶颈，那么通过并行使用多个原件会获得意外性能提高。

这种想法催生出了RAID技术，将请求数据驻留在多个分离的物理硬盘上，对于分离或单个IO请求都可以并行处理。

*RAID技术特点(不一定严格遵守):*

- **一组**物理磁盘驱动器被抽象为单个逻辑磁盘驱动器
- 数据以**条带化**分布在多个物理磁盘上(*逻辑上看是连续的*)
- 使用额外空间存储校验位提高可靠性

### RAID 0

使用n块物理磁盘，将文件数据分成n片驻留在各个磁盘上。读写操作是n个物理磁盘并行工作，时间开销降低为单个磁盘的1/n。RAID 0的读写速度非常快，它以牺牲掉可靠性为代价换来极致的速度(*RAID 0没有甄错能力*)。只要有一块物理盘损坏，数据就不可用了，并且无法恢复。

![img](https://i-blog.csdnimg.cn/direct/bbf2ced795e345949298839c0e22538b.png)

### RAID 1

使用2n块物理磁盘，每个都有与之对应的镜像磁盘(*保存完全相同的数据*),读操作可以任意选取一块磁盘读取(*时间开销小的那个*)，写操作需要同时更新镜像磁盘。RAID 1的安全性最高，它容许多块物理盘损坏，只需要将坏盘置换出就可以生成新的镜像，它以牺牲掉成本换取安全性。

![img](https://i-blog.csdnimg.cn/direct/6fb97f63a8a34ee6a22e745e861fee28.png)

### RAID 5

最常用的RAID。使用了**块级分布式奇偶校验**，做到了成本、效率、安全的折中(*写操作需要额外更新校验位*)。每一个物理块都分配了一些盘片专用于存储校验信息，某一块物理盘数据出错时可以借助其他盘的数据进行恢复。

![img](https://i-blog.csdnimg.cn/direct/77a6bb79cbef4dc0850a83353d8c4f68.png)

## 磁盘缓存

为了缓解主存和辅存速度不一致，硬件厂家也为磁盘引入了缓存技术。磁盘的读写请求数据都会经过缓存，只要缓存命中就可以节省很多时间，对提高机械硬盘的读写速度非常显著。

# 固态硬盘(SSD)

固态硬盘是用电子元件制作而成的，虽然价格价格比机械硬盘高，但是好在快和耐用。

![固态硬盘内部 的图像结果](https://tse1-mm.cn.bing.net/th/id/OIP-C.drllpZmMS-QAQ7atHozgWQHaEk?w=292&h=180&c=7&pcl=1b1a19&r=0&o=5&dpr=1.3&pid=1.7)

*SSD优势*

- **高性能IO，延迟低(*比HDD快10倍以上*)**
- **不易受到物理冲击和振动、磨损现象轻，耐用**
- **功耗低，省电**

*SSD组成*

- **控制器：提供SSD设备级接口和固件执行**
- **寻址部件：在闪存组件上执行选择逻辑**
- **高速缓存：高速RAM存储器组件**
- **纠错部件：错误检错和纠正**
- **闪存组件：众多独立地NAND闪存芯片**

*SSD存储单元*

实物图中的黑色芯片即闪存芯片(***NAND package***)，它是存储数据的地方。

package由多个die构成

die由多个plane构成

plane由多个block构成

block由多个page构成

**page为固态硬盘的基本传输单位**，一般不是512Bytes,为了兼容性SSD控制器会生成逻辑扇区与物理Page的映射关系。

![img](https://i-blog.csdnimg.cn/direct/a2283cd5c05d4eaaa3fe101b539b9ed5.png)

*固态硬盘采用了并行读取，将文件数据拆分到各个闪存单元内*